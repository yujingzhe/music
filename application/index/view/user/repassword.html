<!DOCTYPE html>
<!-- saved from url=(0055)https://y.qq.com/portal/profile.html#sub=song&tab=like& -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta http-equiv="Content-Language" content="zh-cn">
 
    <meta name="mobile-agent" content="format==[html5];url=//m.y.qq.com">
    <meta name="applicable-device" content="pc">
    <title>我的音乐</title>
    
    <script type="text/javascript" src="__ROOT____HOME_PATH__/js/jquery.js"></script>
<script type="text/javascript" src="__ROOT____HOME_PATH__/js/menu.js"></script>
<script type="text/javascript" src="__ROOT____HOME_PATH__/js/visitor.js"></script>

<script type="text/javascript" src="__ROOT____HOME_PATH__/js/lib.js"></script>
    <link href="__HOME_PATH__/css/index.css" type="text/css" rel="stylesheet" />
<link href="__HOME_PATH__/css/tips.css" type="text/css" rel="stylesheet" />
<link href="__HOME_PATH__/css/visitor.css" type="text/css" rel="stylesheet" />
   
    <link rel="stylesheet" href="__HOME_PATH__/user/css/amazeui.min.css"/>
         

    <link rel="stylesheet" href="__HOME_PATH__/user/css/layout0115.css">
    <link rel="stylesheet" href="__HOME_PATH__/user/css/profile.css">

<style type="text/css">.emojicon-m {min-height: 1em !important; min-width: 1em !important; max-height: 1em !important;max-width: 1em !important;vertical-align: middle !important;float: none !important;background-repeat:no-repeat;background-position:center center;	background-size: contain;display: inline-block;}</style><style type="text/css">.emojicon-m {min-height: 1em !important; min-width: 1em !important; max-height: 1em !important;max-width: 1em !important;vertical-align: middle !important;float: none !important;background-repeat:no-repeat;background-position:center center;	background-size: contain;display: inline-block;}</style></head>
<body class="os_mac">

      <div class="frame_top">
	{include file='base/top' /}
	
</div>

    <div class="main main--profile" style="">
      

		<div class="js_box" id="like_box" style="display: block;">
			<div class="mod_tab" role="nav">
				<a class="mod_tab__item " href="{:url('usersong')}" data-tab="like_song" data-stat="y_new.profile.like.tab.song">收藏歌曲</a>
				
				<a class="mod_tab__item" href="{:url('userinfo')}" data-tab="like_album" data-stat="y_new.profile.like.tab.album">个人资料</a>
				<a class="mod_tab__item mod_tab__current" href="{:url('repassword')}" data-tab="like_mv" data-stat="y_new.profile.like.tab.mv">修改密码</a>
			</div>
			<div class="profile_cont">
				<div class="js_sub" id="like_song_box" style="display: block;">
                        <div class="mod_songlist_toolbar">
                         </div>
                
        <form class="am-form am-form-horizontal"  method="post"> 
        <div class="am-form-group">
            <label for="user-QQ" class="am-u-sm-3 am-form-label">用户名</label>
            <div class="am-u-sm-9">
              <input type="text" name='name' id='name'  placeholder="请填写你注册的用户名 以便验证" >
             
            </div>
          </div>     
        
        <div class="am-form-group">
            <label for="user-QQ" class="am-u-sm-3 am-form-label">验证邮箱</label>
            <div class="am-u-sm-9">
              <input type="email" name='email' id='email'  placeholder="请填写你注册时所用的邮箱" onblur='check_email()' >
             <span class="select_num" id="email_tips"></span>
            </div>
          </div>    
        
         <div class="am-form-group">
            <label for="user-phone" class="am-u-sm-3 am-form-label">修改密码</label>
            <div class="am-u-sm-9">
                <input type="password" id="password" name='password' id="user-phone" onblur='check_pwd()' >
               <span class="select_num" id="password_tips">最小长度为 6 个字符。</span>
            </div>
          </div>

          

          <div class="am-form-group">
            <label for="user-weibo" class="am-u-sm-3 am-form-label">确认密码</label>
            <div class="am-u-sm-9">
                <input type="password" id="repass" id="user-weibo" onblur='check_repwd()'>
                <span class="select_num" id="repassword_tips"></span>
            </div>
          </div>

          

          <div class="am-form-group">
            <div class="am-u-sm-9 am-u-sm-push-3">
              <input type="submit" class="am-btn am-btn-primary" id='sub' value='保存' style='display: none'/>
            </div>
          </div>
        </form>
        
                             </div>
			</div>
		</div>
	
		
    </div>

{include file='base/tips' /}


</body>
</html>
<script type="text/javascript">
    
    
    
    function check_email(){
      //console.log(1);
      //获取账号
      var name =
        document.getElementById("email").value;
      //校验其格式(\w字母或数字或下划线)
       var name =
        document.getElementById("name").value;
      var span =
        document.getElementById("email_tips");
      var sub =
        document.getElementById("sub");
     
     $.post('{:url("check")}', {name:name,email:name}, function(data){
         console.log(data);
           if (data == 1) {
                span.innerHTML = "✔ 【通过验证】";
                span.style.color = 'green';
                sub.style.display = 'block'   
           } else if (data == 2) {
               span.innerHTML = "✘ 【邮箱不存在】";
                span.style.color = 'red';
           }
        });
        return false;
    }
    
    function check_pwd() {
      //console.log(1);
      //获取账号
      var code =
        document.getElementById("password").value;
      //校验其格式(\w字母或数字或下划线)
      //console.log(code);
      var span =
        document.getElementById("password_tips");
      var reg = /^\w{6,10}$/;
      if(reg.test(code)) {
        //通过，增加ok样式
        span.innerHTML = '✔';
        span.style.color = 'green';
      } else {
        //不通过，增加error样式
        span.innerHTML = "✘ 【至少六位，不能有下划线之外的字符 OK？】";
        span.style.color = 'red';
        
      }
    }
    function check_repwd() {
      //console.log(1);
      //获取账号
      var recode =
        document.getElementById("repass").value;
      //校验其格式(\w字母或数字或下划线)
      var code =
        document.getElementById("password").value;
      //console.log(code);
      var span =
        document.getElementById("repassword_tips");
     
      if(code == recode) {
        //通过，增加ok样式
        span.innerHTML = '✔';
        span.style.color = 'green';
      } else {
        //不通过，增加error样式
        span.innerHTML = "✘ 【前后密码不一致】";
        span.style.color = 'red';
        
      }
    }
   
    
     $('#sub').click(function () {
        
        var pwd = $('input[name=password]').val();
       var email =
        document.getElementById("email").value;
        
        console.log(pwd);
        console.log(email);
        // ajax请求
       $.post('{:url("dorepass")}', {pwd:pwd,email:email}, function(data){
           if (data == 2) {
                alert("修改失败");
           } else {
            window.location.href ='{:url("User/login")}';
           }
        
        });
        return false;
    });
   
</script>